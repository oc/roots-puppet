<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Declarative Configuration Management with&nbsp;Puppet</title>
    <!-- Styles -->

    <style type="text/css" media="print">
      * {
    margin: 0;
    padding: 0;
}
@page {
    size: landscape;
}
body {
    font: 100% "Lucida Grande", "Trebuchet MS", Verdana, sans-serif;
    padding: 0;
    margin: 0;
}
div.slide {
    min-width: 800px;
    min-height: 600px;
    padding: 1em;
    overflow: hidden;
    page-break-after: always;
    border: 1px solid black;
    border-radius: 20px;
}
div.slide div.inner {
    width: 800px;
    height: 600px;
    margin: auto;
    display: table-cell;
}
h1 {
    font-size: 2.4em;
}
h2 {
    font-size: 1.4em;
}
h3 {
    margin: 1em 0;
}
ul {
    margin: 0;
    padding: 0;
}
p, li, pre {
    margin: 1em 0;
}
li {
    margin-left: 2em;
}
a {
    color: #000000;
}
pre, code {
    max-width: 800px;
    background: #eee;
    font-family: Monaco, monospace;
    font-size: 90%;
}
pre {
    padding: .2em .5em;
    overflow: hidden;
    border-radius: .8em;
}
code {
    padding: 0 .2em;
}
.slide header:only-child h1 {
  line-height: 180%;
  text-align: center;
  display: table-cell;
  vertical-align: middle;
  height: 600px;
  width: 800px;
  font-size: 48px;
  margin-top:100px;
  margin-bottom:100px;
}
#toc, #help, .slide aside, .slide footer, .slide .notes {
  display: none;
}

    </style>
    <style type="text/css" media="screen, projection">
      body {
  font: 14px "Lucida Grande", "Trebuchet MS", Verdana, sans-serif;
  background: #778;
  padding: 0;
  margin: 0;
  overflow: hidden;
}

div.presentation {
  position: absolute;
  width: 100%;
  display: table-cell;
  vertical-align: middle;
  height: 100%;
  background: inherit;
}

div.slides {
  width: 100%;
  height: 100%;
  overflow: hidden;
  left: 0;
  top: 0;
  position: absolute;
  display: block;
  background-color: #fff;
  -webkit-transition: -webkit-transform 1s ease-in-out;
  -moz-transition: -moz-transform 1s ease-in-out;
  -o-transition: -o-transform 1s ease-in-out;
}

div.slide {
  display: none;
  position: absolute;
  overflow: hidden;
  width: 900px;
  height: 700px;
  left: 50%;
  top: 50%;
  margin-top: -350px;
  background: -webkit-gradient(linear, left bottom, left top, from(#fff), to(#eeeeec));
  background-color: #eee;
  background: -moz-linear-gradient(bottom, #fff, #eeeeec);
  -webkit-transition: margin 0.25s ease-in-out;
  -moz-transition: margin 0.25s ease-in-out;
  -o-transition: margin 0.25s ease-in-out;
  border-top-right-radius: 20px;
  -moz-border-radius-topright: 20px;
  -webkit-border-top-right-radius: 20px;
  border-bottom-left-radius: 0px;
  -moz-border-radius-bottomleft: 0px;
  -webkit-border-bottom-left-radius: 0px;
  border-top-left-radius: 20px;
  -moz-border-radius-topleft: 20px;
  -webkit-border-top-left-radius: 20px;
  border-bottom-right-radius: 0px;
  -moz-border-radius-bottomright: 0px;
  -webkit-border-bottom-right-radius: 0px;

}

div.slide p {
  font-size: 20px;
}

.slide.far-past {
  display: block;
  margin-left: -2400px;
}

.slide.past {
  display: block;
  margin-left: -1400px;
}

.slide.current {
  display: block;
  margin-left: -450px;
}

.slide.future {
  display: block;
  margin-left: 500px;
}

.slide.far-future {
  display: block;
  margin-left: 1500px;
}

body.three-d div.slides {
  -webkit-transform: translateX(50px) scale(0.8) rotateY(10deg);
  -moz-transform: translateX(50px) scale(0.8) rotateY(10deg);
  -o-transform: translateX(50px) scale(0.8) rotateY(10deg);
}


/* Content */

header:not(:only-child) {
  font-family: 'Lucida Grande';
  font-weight: normal;
  font-size: 50px;
  letter-spacing: -.05em;
  color: white;
  color: black;
  text-shadow: rgba(0, 0, 0, 0.2) 0 2px 5px;
  position: absolute;
  left: 30px;
  top: 25px;
  margin: 0;
  padding: 0;
}

header h1, header h2, header h3, header h4, header h5, header h6 {
  display: inline;
  font-size: 100%;
  font-weight: normal;
  padding: 0;
  margin: 0;
}

header h2:first-child {
  margin-top: 0;
}

section, .slide header:only-child h1 {
  font-family: 'Lucida Grande';
  color: #3f3f3f;
  text-shadow: rgba(0, 0, 0, 0.2) 0 2px 5px;
  margin-left: 30px;
  margin-right: 30px;
  margin-top: 100px;
  display: block;
  overflow: hidden;
}

a {
  color: inherit;
  display: inline-block;
  text-decoration: none;
  line-height: 110%;
  border-bottom: 2px solid #3f3f3f;
}

pre {
  font-size: 16px;
  font-family: Monaco, Courier, monospace;
}

li {
  padding: 10px 0;
  font-size: 20px;
}

.slide header:only-child h1 {
  line-height: 180%;
  text-align: center;
  display: table-cell;
  vertical-align: middle;
  height: 700px;
  width: 900px;
  font-size: 50px;
  margin-top:100px;
  margin-bottom:100px;
}

.sidebar {
  background: -webkit-gradient(linear, top right, bottom right, from(#dde), to(#fff));
  -webkit-transition: margin 0.25s ease-in-out;
  background-color: #eee;
  background: -moz-linear-gradient(right, #dde, #fff);
  border-right: 5px solid #ccd;
  z-index: 9999999;
  height: 100%;
  overflow: hidden;
  top: 0;
  position: absolute;
  display: block;
  margin: 0;
  margin-left: -400px;
  padding: 10px 16px;
  overflow: auto;
  -webkit-transition: margin 0.2s ease-in-out;
  -moz-transition: margin 0.2s ease-in-out;
  -o-transition: margin 0.2s ease-in-out;
}

.sidebar h2 {
  text-shadow: rgba(0, 0, 0, 0.2) 0 2px 5px;
  margin: 0 0 16px;
  padding: 0;
}

.sidebar table {
  width: 100%;
  margin: 0;
  padding: 0;
  border-collapse: collapse;
}

.sidebar table caption {
  display: none;
}

.sidebar tr {
  margin: 2px 0;
  border-bottom: 1px solid #ccc;
}

.sidebar th {
  text-align: left;
  font-weight: normal;
  max-width: 300px;
  overflow: hidden;
}

.sidebar tr.sub th {
  text-indent: 20px;
}

.sidebar td {
  text-align: right;
  min-width: 20px;
}

.sidebar a {
  display: block;
  text-decoration: none;
  border-bottom: none;
  padding: 4px 0;
}

.sidebar tr.active {
  background: #ff0;
}

aside {
  display: none;
}
  aside.source {
    position: absolute;
    bottom: 6px;
    left: 10px;
    text-indent: 10px;
  }
  aside.page_number {
    position: absolute;
    bottom: 6px;
    right: 10px;
    text-indent: 10px;
  }

.notes {
  display: none;
  padding: 10px;
  background: #ccc;
  border-radius: 10px;
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;
}
  div.slide p.notes {
    font-size: 90%;
}

img { display: block; margin: auto; }

/* Expose */

body.expose div.slides {
  float: left;
  position: relative;
  overflow: auto;
  margin-bottom: 10px;
}

body.expose div.slide {
  display: block;
  float: left;
  position: relative;
  left: auto !important;
  top: auto !important;
  margin: 10px !important;
  -webkit-transition: none;
  -moz-transition: none;
  -o-transition: none;
  -moz-transform: scale(.33, .33);
  -moz-transform-origin: 0 0;
  -webkit-transform: scale(.33, .33);
  -webkit-transform-origin: 0 0;
  -o-transform: scale(.33, .33);
  -o-transform-origin: 0 0;
  cursor: pointer;
}

body.expose div.slide:hover {
  background: -webkit-gradient(linear, left bottom, left top, from(#bdd), to(#fff));
  background-color: #eee;
  background: -moz-linear-gradient(bottom, #bdd, #fff);
}

body.expose .slide-wrapper {
  float: left;
  position: relative;
  margin: .5%;
  width: 300px;
  height: 233px;
}

body.expose .slide footer {
}

body.expose .slide .inner {
}

body.expose .slide.far-past,
body.expose .slide.past,
body.expose .slide.future,
body.expose .slide.far-future {
  margin-left: 0;
}

body.expose .slide.current {
  background: -webkit-gradient(linear, left bottom, left top, from(#ddb), to(#fff));
  background-color: #eee;
  background: -moz-linear-gradient(bottom, #ddb, #fff);
  border: 16px solid #fff;
  -moz-transform: scale(.315, .315);
  -moz-transform-origin: 0 0;
  -webkit-transform: scale(.315, .315);
  -webkit-transform-origin: 0 0;
  -o-transform: scale(.315, .315);
  -o-transform-origin: 0 0;
}

/* Pygments default theme */
.hll { background-color: #ffffcc }
.c { color: #408080; font-style: italic } /* Comment */
.err { border: 1px solid #FF0000 } /* Error */
.k { color: #008000; font-weight: bold } /* Keyword */
.o { color: #666666 } /* Operator */
.cm { color: #408080; font-style: italic } /* Comment.Multiline */
.cp { color: #BC7A00 } /* Comment.Preproc */
.c1 { color: #408080; font-style: italic } /* Comment.Single */
.cs { color: #408080; font-style: italic } /* Comment.Special */
.gd { color: #A00000 } /* Generic.Deleted */
.ge { font-style: italic } /* Generic.Emph */
.gr { color: #FF0000 } /* Generic.Error */
.gh { color: #000080; font-weight: bold } /* Generic.Heading */
.gi { color: #00A000 } /* Generic.Inserted */
.go { color: #808080 } /* Generic.Output */
.gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.gs { font-weight: bold } /* Generic.Strong */
.gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.gt { color: #0040D0 } /* Generic.Traceback */
.kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.kp { color: #008000 } /* Keyword.Pseudo */
.kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.kt { color: #B00040 } /* Keyword.Type */
.m { color: #666666 } /* Literal.Number */
.s { color: #BA2121 } /* Literal.String */
.na { color: #7D9029 } /* Name.Attribute */
.nb { color: #008000 } /* Name.Builtin */
.nc { color: #0000FF; font-weight: bold } /* Name.Class */
.no { color: #880000 } /* Name.Constant */
.nd { color: #AA22FF } /* Name.Decorator */
.ni { color: #999999; font-weight: bold } /* Name.Entity */
.ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.nf { color: #0000FF } /* Name.Function */
.nl { color: #A0A000 } /* Name.Label */
.nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.nt { color: #008000; font-weight: bold } /* Name.Tag */
.nv { color: #19177C } /* Name.Variable */
.ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.w { color: #bbbbbb } /* Text.Whitespace */
.mf { color: #666666 } /* Literal.Number.Float */
.mh { color: #666666 } /* Literal.Number.Hex */
.mi { color: #666666 } /* Literal.Number.Integer */
.mo { color: #666666 } /* Literal.Number.Oct */
.sb { color: #BA2121 } /* Literal.String.Backtick */
.sc { color: #BA2121 } /* Literal.String.Char */
.sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.s2 { color: #BA2121 } /* Literal.String.Double */
.se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.sh { color: #BA2121 } /* Literal.String.Heredoc */
.si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.sx { color: #008000 } /* Literal.String.Other */
.sr { color: #BB6688 } /* Literal.String.Regex */
.s1 { color: #BA2121 } /* Literal.String.Single */
.ss { color: #19177C } /* Literal.String.Symbol */
.bp { color: #008000 } /* Name.Builtin.Pseudo */
.vc { color: #19177C } /* Name.Variable.Class */
.vg { color: #19177C } /* Name.Variable.Global */
.vi { color: #19177C } /* Name.Variable.Instance */
.il { color: #666666 } /* Literal.Number.Integer.Long */

    </style>


    <!-- /Styles -->
    <!-- Javascripts -->

    <script>
      function main() {
  // Since we don't have the fallback of attachEvent and
  // other IE only stuff we won't try to run JS for IE.
  // It will run though when using Google Chrome Frame
  if (document.all) { return; }

  var currentSlideNo;
  var notesOn = false;
  var slides = document.getElementsByClassName('slide');
  var touchStartX = 0;
  var spaces = /\s+/, a1 = [""];
  var tocOpened = false;
  var helpOpened = false;
  var overviewActive = false;
  var showingPresenterView = false;
  var presenterViewWin = null;
  var isPresenterView = false;

  var str2array = function(s) {
    if (typeof s == "string" || s instanceof String) {
      if (s.indexOf(" ") < 0) {
        a1[0] = s;
        return a1;
      } else {
        return s.split(spaces);
      }
    }
    return s;
  };

  var trim = function(str) {
    return str.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
  };

  var addClass = function(node, classStr) {
    classStr = str2array(classStr);
    var cls = " " + node.className + " ";
    for (var i = 0, len = classStr.length, c; i < len; ++i) {
      c = classStr[i];
      if (c && cls.indexOf(" " + c + " ") < 0) {
        cls += c + " ";
      }
    }
    node.className = trim(cls);
  };

  var removeClass = function(node, classStr) {
    var cls;
    if (classStr !== undefined) {
      classStr = str2array(classStr);
      cls = " " + node.className + " ";
      for (var i = 0, len = classStr.length; i < len; ++i) {
        cls = cls.replace(" " + classStr[i] + " ", " ");
      }
      cls = trim(cls);
    } else {
      cls = "";
    }
    if (node.className != cls) {
      node.className = cls;
    }
  };

  var getSlideEl = function(slideNo) {
    if (slideNo > 0) {
      return slides[slideNo - 1];
    } else {
      return null;
    }
  };

  var getSlideTitle = function(slideNo) {
    var el = getSlideEl(slideNo);
    if (el) {
      var headers = el.getElementsByTagName('header');
      if (headers.length > 0) {
        return el.getElementsByTagName('header')[0].innerText;
      }
    }
    return null;
  };

  var getSlidePresenterNote = function(slideNo) {
    var el = getSlideEl(slideNo);
    if (el) {
      var n = el.getElementsByClassName('presenter_notes');
      if (n.length > 0) {
        return n[0];
      }
    }
    return null;
  };

  var changeSlideElClass = function(slideNo, className) {
    var el = getSlideEl(slideNo);
    if (el) {
      removeClass(el, 'far-past past current future far-future');
      addClass(el, className);
    }
  };

  var updateSlideClasses = function(updateOther) {
    window.location.hash = (isPresenterView ? "presenter" : "slide") + currentSlideNo;

    for (var i=1; i<currentSlideNo-1; i++) {
      changeSlideElClass(i, 'far-past');
    }

    changeSlideElClass(currentSlideNo - 1, 'past');
    changeSlideElClass(currentSlideNo, 'current');
    changeSlideElClass(currentSlideNo + 1, 'future');

    for (i=currentSlideNo+2; i<slides.length+1; i++) {
      changeSlideElClass(i, 'far-future');
    }

    highlightCurrentTocLink();

    document.getElementsByTagName('title')[0].innerText = getSlideTitle(currentSlideNo);

    updatePresenterNotes();

    if (updateOther) { updateOtherPage(); }
  };

  var updatePresenterNotes = function() {
    if (!isPresenterView) { return; }

    var existingNote = document.getElementById('current_presenter_notes');
    var currentNote = getSlidePresenterNote(currentSlideNo).cloneNode(true);
    currentNote.setAttribute('id', 'presenter_note');

    existingNote.replaceChild(currentNote, document.getElementById('presenter_note'));
  };

  var highlightCurrentTocLink = function() {
    var toc = document.getElementById('toc');

    if (toc) {
      var tocRows = toc.getElementsByTagName('tr');
      for (var i=0; i<tocRows.length; i++) {
        removeClass(tocRows.item(i), 'active');
      }

      var currentTocRow = document.getElementById('toc-row-' + currentSlideNo);
      if (currentTocRow) {
        addClass(currentTocRow, 'active');
      }
    }
  };

  var updateOtherPage = function() {
    if (!showingPresenterView) { return; }

    var w = isPresenterView ? window.opener : presenterViewWin;
    w.postMessage('slide#' + currentSlideNo, '*');
  }

  var nextSlide = function() {
    if (currentSlideNo < slides.length) {
      currentSlideNo++;
    }
    updateSlideClasses(true);
  };

  var prevSlide = function() {
    if (currentSlideNo > 1) {
      currentSlideNo--;
    }
    updateSlideClasses(true);
  };

  var showNotes = function() {
    var notes = getSlideEl(currentSlideNo).getElementsByClassName('notes');
    for (var i = 0, len = notes.length; i < len; i++) {
      notes.item(i).style.display = (notesOn) ? 'none':'block';
    }
    notesOn = (notesOn) ? false : true;
  };

  var showSlideNumbers = function() {
    var asides = document.getElementsByClassName('page_number');
    var hidden = asides[0].style.display != 'block';
    for (var i = 0; i < asides.length; i++) {
      asides.item(i).style.display = hidden ? 'block' : 'none';
    }
  };

  var showSlideSources = function() {
    var asides = document.getElementsByClassName('source');
    var hidden = asides[0].style.display != 'block';
    for (var i = 0; i < asides.length; i++) {
      asides.item(i).style.display = hidden ? 'block' : 'none';
    }
  };

  var showToc = function() {
    if (helpOpened) {
        showHelp();
    }

    var toc = document.getElementById('toc');

    if (toc) {
      toc.style.marginLeft = tocOpened ? '-' + toc.clientWidth + 'px' : '0px';
      tocOpened = !tocOpened;
    }

    updateOverview();
  };

  var showHelp = function() {
    if (tocOpened) {
        showToc();
    }

    var help = document.getElementById('help');

    if (help) {
      help.style.marginLeft = helpOpened ? '-' + help.clientWidth + 'px' : '0px';
      helpOpened = !helpOpened;
    }
  };

  var showPresenterView = function() {
    if (isPresenterView) { return; }

    if (showingPresenterView) {
      presenterViewWin.close();
      presenterViewWin = null;
      showingPresenterView = false;
    } else {
      presenterViewWin = open(window.location.pathname + "#presenter" + currentSlideNo, 'presenter_notes',
                                  'directories=no,location=no,toolbar=no,menubar=no,copyhistory=no');
      showingPresenterView = true;
    }
  }

  var switch3D = function() {
    if (document.body.className.indexOf('three-d') == -1) {
      document.getElementsByClassName('presentation')[0].style.webkitPerspective = '1000px';
      document.body.className += ' three-d';
    } else {
      window.setTimeout("document.getElementsByClassName('presentation')[0].style.webkitPerspective = '0';", 2000);
      document.body.className = document.body.className.replace(/three-d/, '');
    }
  };

  var toggleOverview = function() {
    var action = overviewActive ? removeClass : addClass;
    action(document.body, 'expose');
    overviewActive = !overviewActive;
    updateOverview();
  };

  var updateOverview = function() {
    try {
      var presentation = document.getElementsByClassName('presentation')[0];
    } catch (e) {
      return;
    }

    if (isPresenterView) {
      var action = overviewActive ? removeClass : addClass;
      action(document.body, 'presenter_view');
    }

    var toc = document.getElementById('toc');

    if (!toc) {
      return;
    }

    if (!tocOpened || !overviewActive) {
      presentation.style.marginLeft = '0px';
      presentation.style.width = '100%';
    } else {
      presentation.style.marginLeft = toc.clientWidth + 'px';
      presentation.style.width = (presentation.clientWidth - toc.clientWidth) + 'px';
    }
  };

  var handleBodyKeyDown = function(event) {
    switch (event.keyCode) {
      case 13: // Enter
        if (overviewActive) {
          toggleOverview();
        }
        break;
      case 27: // ESC
        toggleOverview();
        break;
      case 37: // left arrow
        prevSlide();
        break;
      case 39: // right arrow
      case 32: // space
        nextSlide();
        break;
      case 50: // 2
        showNotes();
        break;
      case 51: // 3
        switch3D();
        break;
      case 72: // h
        showHelp();
        break;
      case 78: // n
        showSlideNumbers();
        break;
      case 80: // p
        showPresenterView();
        break;
      case 83: // s
        showSlideSources();
        break;
      case 84: // t
        showToc();
        break;
    }
  };

  var handleWheel = function(event) {
    if (tocOpened || helpOpened) {
      return;
    }

    var delta = 0;

    if (!event) {
      event = window.event;
    }

    if (event.wheelDelta) {
      delta = event.wheelDelta/120;
      if (window.opera) delta = -delta;
    } else if (event.detail) {
      delta = -event.detail/3;
    }

    if (delta && delta <0) {
      nextSlide();
    } else if (delta) {
      prevSlide();
    }
  };

  var addSlideClickListeners = function() {
    for (var i=0; i < slides.length; i++) {
      var slide = slides.item(i);
      slide.num = i + 1;
      slide.addEventListener('click', function(e) {
        if (overviewActive) {
          currentSlideNo = this.num;
          toggleOverview();
          updateSlideClasses(true);
        }
        return false;
      }, true);
    }
  };

  var addRemoteWindowControls = function() {
    window.addEventListener("message", function(e) {
      if (e.data.indexOf("slide#") != -1) {
          currentSlideNo = Number(e.data.replace('slide#', ''));
          updateSlideClasses(false);
      }
    }, false);
  }

  var addTouchListeners = function() {
    document.addEventListener('touchstart', function(e) {
      touchStartX = e.touches[0].pageX;
    }, false);
    document.addEventListener('touchend', function(e) {
      var pixelsMoved = touchStartX - e.changedTouches[0].pageX;
      var SWIPE_SIZE = 150;
      if (pixelsMoved > SWIPE_SIZE) {
        nextSlide();
      }
      else if (pixelsMoved < -SWIPE_SIZE) {
       prevSlide();
      }
    }, false);
  };

  var addTocLinksListeners = function() {
    var toc = document.getElementById('toc');

    if (toc) {
      var tocLinks = toc.getElementsByTagName('a');
      for (var i=0; i < tocLinks.length; i++) {
        tocLinks.item(i).addEventListener('click', function(e) {
          currentSlideNo = Number(this.attributes['href'].value.replace('#slide', ''));
          updateSlideClasses(true);
          return false;
        }, true);
      }
    }
  };

  // initialize

  (function() {
    if (window.location.hash == "") {
      currentSlideNo = 1;
    } else if (window.location.hash.indexOf("#presenter") != -1) {
      currentSlideNo = Number(window.location.hash.replace('#presenter', ''));
      isPresenterView = true;
      showingPresenterView = true;
      presenterViewWin = window;
      addClass(document.body, 'presenter_view');
    } else {
      currentSlideNo = Number(window.location.hash.replace('#slide', ''));
    }

    document.addEventListener('keydown', handleBodyKeyDown, false);
    document.addEventListener('DOMMouseScroll', handleWheel, false);
    window.onmousewheel = document.onmousewheel = handleWheel;

    var els = slides;
    for (var i = 0, el; el = els[i]; i++) {
      addClass(el, 'slide far-future');
    }
    updateSlideClasses(false);

    // add support for finger events (filter it by property detection?)
    addTouchListeners();

    addTocLinksListeners();

    addSlideClickListeners();

    addRemoteWindowControls();
  })();
};

    </script>


    <!-- /Javascripts -->
</head>
<body>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">

            <header><h1>Declarative Configuration Management with&nbsp;Puppet</h1></header>


          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              1/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">


            <section><blockquote>
<p>Configuration Management is a set of tool that let you describe your stack's
setup in such a way that this configuration management tool can recreate that
stack from <em>any known starting point</em>.</p>
<p>Where an automation tool like Fabric or Capistrano is <em>imperative</em>
(do this, do that, then do this), configuration management tools tends
to be <em>declarative</em>.</p>
<p>You say: &ldquo;I have a server and it runs MySQL as this user&rdquo; and the
configuration management tool figures out how to make that true.</p>
</blockquote>
<p>&mdash; Jacob Kaplan-Moss,
<a href="http://blog.mahalo.com/dev-blog/2011/2/15/jacob-kaplan-moss-at-mahalo.html">How I Learned To Stop Worrying and Love Deployment</a></p></section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              2/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">

            <header><h1>Users</h1></header>


            <section><ul>
<li>Twitter</li>
<li>Digg</li>
<li>Google</li>
<li>Rackspace</li>
<li>Red Hat</li>
<li>Match.com</li>
<li>Stanford University</li>
<li>New York University</li>
</ul></section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              3/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">

            <header><h1>Preparation</h1></header>


            <section><p>Bare
    !sh yum install puppet</p>
<p>Master</p>
<div class="highlight"><pre><span class="lineno">1</span> bash &lt; &lt;<span class="o">(</span>curl -s https://github.com/oc/roots-puppet/raw/master/init-master.sh<span class="o">)</span>
</pre></div>

<p>Agent</p>
<div class="highlight"><pre><span class="lineno">1</span> bash &lt; &lt;<span class="o">(</span>curl -s https://github.com/oc/roots-puppet/raw/master/init-agent.sh<span class="o">)</span>
</pre></div>
</section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              4/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">

            <header><h1>Resources</h1></header>


            <section><p>Have <em>type</em>, <em>name</em>, and <em>parameters</em>:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">package</span> <span class="p">{</span> <span class="s2">&quot;httpd&quot;</span><span class="p">:</span>
<span class="lineno">2</span>   <span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">present</span><span class="p">,</span>
<span class="lineno">3</span> <span class="p">}</span>
</pre></div>
</section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              5/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">

            <header><h1>Running puppet code</h1></header>


            <section><div class="highlight"><pre><span class="lineno">1</span> puppet apply myfile.pp
</pre></div>
</section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              6/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">

            <header><h1>Debugging puppet code</h1></header>


            <section><p>Master</p>
<div class="highlight"><pre><span class="lineno">1</span> puppetmasterd --no-deamonize
</pre></div>

<p>Agents (files)</p>
<div class="highlight"><pre><span class="lineno">1</span> puppet --debug --verbose file.pp
<span class="lineno">2</span> puppet --parseonly file.pp
</pre></div>

<p>Configurations</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="c1"># Notice the master log</span>
<span class="lineno">2</span> <span class="n">notice</span><span class="p">(</span><span class="s2">&quot;The value is: ${yourvar}&quot;</span><span class="p">)</span>
<span class="lineno">3</span>
<span class="lineno">4</span> <span class="c1"># Notify the clients</span>
<span class="lineno">5</span> <span class="n">notify</span><span class="p">{</span><span class="s2">&quot;The value is: ${yourvar}&quot;</span><span class="p">:</span> <span class="p">}</span>
</pre></div>
</section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              7/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">

            <header><h1>Different resource types</h1></header>


            <section><div class="highlight"><pre><span class="lineno"> 1</span> <span class="n">group</span> <span class="p">{</span> <span class="s2">&quot;staff&quot;</span><span class="p">:</span>
<span class="lineno"> 2</span>     <span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">present</span><span class="p">,</span>
<span class="lineno"> 3</span>     <span class="n">gid</span>    <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
<span class="lineno"> 4</span> <span class="p">}</span>
<span class="lineno"> 5</span>
<span class="lineno"> 6</span> <span class="n">user</span> <span class="p">{</span> <span class="s2">&quot;oc&quot;</span><span class="p">:</span>
<span class="lineno"> 7</span>     <span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">present</span><span class="p">,</span>
<span class="lineno"> 8</span>     <span class="n">gid</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
<span class="lineno"> 9</span>     <span class="n">uid</span> <span class="o">=&gt;</span> <span class="mi">1337</span><span class="p">,</span>
<span class="lineno">10</span>     <span class="n">home</span> <span class="o">=&gt;</span> <span class="s2">&quot;/home/oc&quot;</span><span class="p">,</span>
<span class="lineno">11</span>     <span class="n">managehome</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="lineno">12</span> <span class="p">}</span>
<span class="lineno">13</span>
<span class="lineno">14</span> <span class="n">cron</span> <span class="p">{</span> <span class="s2">&quot;poor-mans-http-ping&quot;</span><span class="p">:</span>
<span class="lineno">15</span>   <span class="n">command</span> <span class="o">=&gt;</span> <span class="s2">&quot;curl -s http://rootsconf.no/ &gt; /dev/null 2&gt;&amp;1&quot;</span><span class="p">,</span>
<span class="lineno">16</span>   <span class="n">user</span> <span class="o">=&gt;</span> <span class="s2">&quot;oc&quot;</span><span class="p">,</span>
<span class="lineno">17</span>   <span class="n">minute</span> <span class="o">=&gt;</span> <span class="s2">&quot;*/1&quot;</span><span class="p">,</span> <span class="c1"># Every minute</span>
<span class="lineno">18</span> <span class="p">}</span>
</pre></div>
</section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              8/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">

            <header><h1>Generic resource types</h1></header>


            <section><p>Building blocks for describing resources not directly supported.</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">file</span> <span class="p">{</span> <span class="s2">&quot;/etc/localtime&quot;</span><span class="p">:</span>
<span class="lineno">2</span>   <span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">link</span><span class="p">,</span>
<span class="lineno">3</span>   <span class="n">target</span> <span class="o">=&gt;</span> <span class="s2">&quot;/usr/share/zoneinfo/Europe/Oslo&quot;</span><span class="p">,</span>
<span class="lineno">4</span> <span class="p">}</span>
</pre></div>
</section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              9/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">

            <header><h1>Dependencies between resources</h1></header>


            <section><p><code>require</code> / <code>before</code> and <code>notify</code> / <code>subsribe</code>.</p>
<div class="highlight"><pre><span class="lineno"> 1</span> <span class="nv">$nexus_bundle</span> <span class="o">=</span> <span class="s2">&quot;/tmp/nexus-oss-webapp-1.9.1.1-bundle.tar.gz&quot;</span>
<span class="lineno"> 2</span>
<span class="lineno"> 3</span> <span class="n">file</span> <span class="p">{</span> <span class="s2">&quot;/opt/nexus-oss-webapp-1.9.1.1&quot;</span><span class="p">:</span>
<span class="lineno"> 4</span>   <span class="n">require</span> <span class="o">=&gt;</span> <span class="n">Exec</span><span class="p">[</span><span class="s2">&quot;Extract nexus&quot;</span><span class="p">],</span>
<span class="lineno"> 5</span> <span class="p">}</span>
<span class="lineno"> 6</span>
<span class="lineno"> 7</span> <span class="n">exec</span> <span class="p">{</span> <span class="s2">&quot;Extract nexus&quot;</span><span class="p">:</span>
<span class="lineno"> 8</span>   <span class="n">cwd</span>     <span class="o">=&gt;</span> <span class="s2">&quot;/opt&quot;</span><span class="p">,</span>
<span class="lineno"> 9</span>   <span class="n">command</span> <span class="o">=&gt;</span> <span class="s2">&quot;tar xvf $nexus_bundle&quot;</span><span class="p">,</span>
<span class="lineno">10</span>   <span class="n">creates</span> <span class="o">=&gt;</span> <span class="s1">&#39;/opt/nexus-oss-webapp-1.9.1.1&#39;</span><span class="p">,</span>
<span class="lineno">11</span>   <span class="n">path</span>    <span class="o">=&gt;</span> <span class="s2">&quot;/usr/bin:/bin&quot;</span><span class="p">,</span>
<span class="lineno">12</span>   <span class="n">require</span> <span class="o">=&gt;</span> <span class="n">Exec</span><span class="p">[</span><span class="s2">&quot;Fetch nexus&quot;</span><span class="p">],</span>
<span class="lineno">13</span> <span class="p">}</span>
<span class="lineno">14</span>
<span class="lineno">15</span> <span class="n">exec</span> <span class="p">{</span> <span class="s2">&quot;Fetch nexus&quot;</span><span class="p">:</span>
<span class="lineno">16</span>   <span class="n">cwd</span>     <span class="o">=&gt;</span> <span class="s2">&quot;/tmp&quot;</span><span class="p">,</span>
<span class="lineno">17</span>   <span class="n">command</span> <span class="o">=&gt;</span> <span class="s2">&quot;curl -O $nexus_url&quot;</span><span class="p">,</span>
<span class="lineno">18</span>   <span class="n">creates</span> <span class="o">=&gt;</span> <span class="nv">$nexus_bundle</span><span class="p">,</span>
<span class="lineno">19</span>   <span class="n">path</span>    <span class="o">=&gt;</span> <span class="s2">&quot;/usr/bin:/bin&quot;</span><span class="p">,</span>
<span class="lineno">20</span>   <span class="n">require</span> <span class="o">=&gt;</span> <span class="n">Package</span><span class="p">[</span><span class="s2">&quot;curl&quot;</span><span class="p">],</span>
<span class="lineno">21</span> <span class="p">}</span>
</pre></div>
</section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              10/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">

            <header><h1>Templates and variables</h1></header>


            <section><div class="highlight"><pre><span class="lineno"> 1</span> <span class="nv">$port</span> <span class="o">=</span> <span class="mi">20202</span>
<span class="lineno"> 2</span> <span class="nv">$allowed_users</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;oc&quot;</span><span class="p">,</span> <span class="s2">&quot;stein&quot;</span><span class="p">,</span> <span class="s2">&quot;root&quot;</span><span class="p">]</span> <span class="c1"># shouldn&#39;t really allow root</span>
<span class="lineno"> 3</span>
<span class="lineno"> 4</span> <span class="n">package</span> <span class="p">{</span> <span class="s2">&quot;sshd&quot;</span><span class="p">:</span>
<span class="lineno"> 5</span>   <span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">present</span><span class="p">,</span>
<span class="lineno"> 6</span> <span class="p">}</span>
<span class="lineno"> 7</span>
<span class="lineno"> 8</span> <span class="n">file</span> <span class="p">{</span> <span class="s2">&quot;/etc/ssh/sshd_config&quot;</span><span class="p">:</span>
<span class="lineno"> 9</span>   <span class="n">content</span> <span class="o">=&gt;</span> <span class="n">template</span><span class="p">(</span><span class="s2">&quot;sshd_config.erb&quot;</span><span class="p">),</span>
<span class="lineno">10</span>   <span class="n">require</span> <span class="o">=&gt;</span> <span class="n">Package</span><span class="p">[</span><span class="s2">&quot;sshd&quot;</span><span class="p">],</span>
<span class="lineno">11</span> <span class="p">}</span>
<span class="lineno">12</span>
<span class="lineno">13</span> <span class="n">service</span> <span class="p">{</span> <span class="n">ssh</span><span class="p">:</span>
<span class="lineno">14</span>   <span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">running</span><span class="p">,</span>
<span class="lineno">15</span>   <span class="n">enable</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="lineno">16</span>   <span class="n">hasstatus</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="lineno">17</span>   <span class="n">subscribe</span> <span class="o">=&gt;</span> <span class="p">[</span> <span class="n">Package</span><span class="p">[</span><span class="s2">&quot;sshd&quot;</span><span class="p">],</span> <span class="n">File</span><span class="p">[</span><span class="s2">&quot;/etc/ssh/sshd_config&quot;</span><span class="p">]</span> <span class="p">],</span>
<span class="lineno">18</span> <span class="p">}</span>
</pre></div>
</section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              11/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">


            <section><p><code>sshd_config.erb</code>:</p>
<div class="highlight"><pre><span class="lineno"> 1</span> <span class="x">Port </span><span class="cp">&lt;%=</span> <span class="n">port</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="lineno"> 2</span>
<span class="lineno"> 3</span> <span class="x">Protocol 2</span>
<span class="lineno"> 4</span> <span class="x">HostKey /etc/ssh/ssh_host_rsa_key</span>
<span class="lineno"> 5</span> <span class="x">HostKey /etc/ssh/ssh_host_dsa_key</span>
<span class="lineno"> 6</span> <span class="x">UsePrivilegeSeparation yes</span>
<span class="lineno"> 7</span>
<span class="lineno"> 8</span> <span class="x">KeyRegenerationInterval 3600</span>
<span class="lineno"> 9</span> <span class="x">ServerKeyBits 768</span>
<span class="lineno">10</span>
<span class="lineno">11</span> <span class="x">LoginGraceTime 120</span>
<span class="lineno">12</span> <span class="x">PermitRootLogin yes # Should be set to &#39;no&#39;</span>
<span class="lineno">13</span> <span class="x">StrictModes yes</span>
<span class="lineno">14</span>
<span class="lineno">15</span> <span class="x">PubkeyAuthentication yes</span>
<span class="lineno">16</span> <span class="x">PasswordAuthentication yes # Should be set to &#39;no&#39;</span>
<span class="lineno">17</span>
<span class="lineno">18</span> <span class="x">UsePAM yes</span>
<span class="lineno">19</span>
<span class="lineno">20</span> <span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">allowed_users</span><span class="o">.</span><span class="n">any?</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="lineno">21</span> <span class="x">AllowUsers </span><span class="cp">&lt;%=</span> <span class="n">allowed_users</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="x"></span>
<span class="lineno">22</span> <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span><span class="x"></span>
</pre></div>
</section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              12/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">

            <header><h1>Running puppet code with templates</h1></header>


            <section><div class="highlight"><pre><span class="lineno">1</span> puppet apply --templatedir<span class="o">=</span>templates templates_and_variables.pp
</pre></div>
</section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              13/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">

            <header><h1>Modules</h1></header>


            <section><p>Collection of resources, classes, files, definitions and templates.</p>
<pre><code>modules/
    nginx/
      manifests/
        init.pp
      files/
        nginx.conf
      templates/
        site.conf.erb
</code></pre></section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              14/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">

            <header><h1>Classes</h1></header>


            <section><p>Collection of resources. Not like the OOP term.</p>
<p><code>modules/nginx/manifests/init.pp</code>:</p>
<div class="highlight"><pre><span class="lineno"> 1</span> <span class="k">class</span> <span class="n">nginx</span> <span class="p">{</span>
<span class="lineno"> 2</span>   <span class="n">package</span> <span class="p">{</span> <span class="n">nginx</span><span class="p">:</span>
<span class="lineno"> 3</span>     <span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">present</span><span class="p">,</span>
<span class="lineno"> 4</span>   <span class="p">}</span>
<span class="lineno"> 5</span>
<span class="lineno"> 6</span>   <span class="n">file</span> <span class="p">{</span> <span class="s2">&quot;/var/www&quot;</span><span class="p">:</span>
<span class="lineno"> 7</span>     <span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">directory</span><span class="p">,</span>
<span class="lineno"> 8</span>   <span class="p">}</span>
<span class="lineno"> 9</span>
<span class="lineno">10</span>   <span class="n">file</span> <span class="p">{</span> <span class="s2">&quot;/etc/nginx/nginx.conf&quot;</span><span class="p">:</span>
<span class="lineno">11</span>     <span class="n">source</span> <span class="o">=&gt;</span> <span class="s2">&quot;puppet:///modules/nginx/nginx.conf&quot;</span><span class="p">,</span>
<span class="lineno">12</span>     <span class="n">require</span> <span class="o">=&gt;</span> <span class="n">Package</span><span class="p">[</span><span class="n">nginx</span><span class="p">],</span>
<span class="lineno">13</span>   <span class="p">}</span>
<span class="lineno">14</span>
<span class="lineno">15</span>   <span class="n">service</span> <span class="p">{</span> <span class="n">nginx</span><span class="p">:</span>
<span class="lineno">16</span>     <span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">running</span><span class="p">,</span>
<span class="lineno">17</span>     <span class="n">enable</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="lineno">18</span>     <span class="n">pattern</span> <span class="o">=&gt;</span> <span class="s2">&quot;nginx: master process&quot;</span><span class="p">,</span>
<span class="lineno">19</span>     <span class="n">subscribe</span> <span class="o">=&gt;</span> <span class="n">File</span><span class="p">[</span><span class="s2">&quot;/etc/nginx/nginx.conf&quot;</span><span class="p">],</span>
<span class="lineno">20</span>     <span class="n">require</span> <span class="o">=&gt;</span> <span class="n">File</span><span class="p">[</span><span class="s2">&quot;/etc/nginx/nginx.conf&quot;</span><span class="p">],</span>
<span class="lineno">21</span>   <span class="p">}</span>
<span class="lineno">22</span> <span class="p">}</span>
</pre></div>
</section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              15/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">

            <header><h1>Applying modules</h1></header>


            <section><div class="highlight"><pre><span class="lineno">1</span> puppet apply --modulepath<span class="o">=</span>modules -e <span class="s1">&#39;include nginx&#39;</span>
</pre></div>
</section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              16/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">

            <header><h1>Definitions</h1></header>


            <section><p>Create new resource types.</p>
<div class="highlight"><pre><span class="lineno"> 1</span> <span class="k">define</span> <span class="n">nginx</span><span class="p">::</span><span class="n">site</span><span class="p">(</span><span class="nv">$domain</span><span class="p">,</span> <span class="nv">$root</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno"> 2</span>
<span class="lineno"> 3</span>   <span class="n">file</span> <span class="p">{</span> <span class="nv">$root:</span>
<span class="lineno"> 4</span>     <span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">directory</span><span class="p">,</span>
<span class="lineno"> 5</span>   <span class="p">}</span>
<span class="lineno"> 6</span>
<span class="lineno"> 7</span>   <span class="n">file</span> <span class="p">{</span> <span class="s2">&quot;/etc/nginx/sites-available/${name}.conf&quot;</span><span class="p">:</span>
<span class="lineno"> 8</span>     <span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">present</span><span class="p">,</span>
<span class="lineno"> 9</span>     <span class="n">content</span> <span class="o">=&gt;</span> <span class="n">template</span><span class="p">(</span><span class="s2">&quot;nginx/site.conf.erb&quot;</span><span class="p">),</span>
<span class="lineno">10</span>     <span class="n">require</span> <span class="o">=&gt;</span> <span class="n">File</span><span class="p">[</span><span class="nv">$root</span><span class="p">],</span>
<span class="lineno">11</span>     <span class="n">notify</span> <span class="o">=&gt;</span> <span class="n">Service</span><span class="p">[</span><span class="n">nginx</span><span class="p">],</span>
<span class="lineno">12</span>   <span class="p">}</span>
<span class="lineno">13</span>
<span class="lineno">14</span>   <span class="n">file</span> <span class="p">{</span> <span class="s2">&quot;/etc/nginx/sites-enabled/${name}.conf&quot;</span><span class="p">:</span>
<span class="lineno">15</span>     <span class="n">ensure</span> <span class="o">=&gt;</span> <span class="n">link</span><span class="p">,</span>
<span class="lineno">16</span>     <span class="n">target</span> <span class="o">=&gt;</span> <span class="s2">&quot;/etc/nginx/sites-available/${name}.conf&quot;</span><span class="p">,</span>
<span class="lineno">17</span>     <span class="n">require</span> <span class="o">=&gt;</span> <span class="n">File</span><span class="p">[</span><span class="s2">&quot;/etc/nginx/sites-available/${name}.conf&quot;</span><span class="p">],</span>
<span class="lineno">18</span>     <span class="n">notify</span> <span class="o">=&gt;</span> <span class="n">Service</span><span class="p">[</span><span class="n">nginx</span><span class="p">],</span>
<span class="lineno">19</span>   <span class="p">}</span>
<span class="lineno">20</span>
<span class="lineno">21</span> <span class="p">}</span>
</pre></div>
</section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              17/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">


            <section><p><code>site.conf.erb</code> for nginx::site resource:</p>
<div class="highlight"><pre><span class="lineno"> 1</span> <span class="x">server {</span>
<span class="lineno"> 2</span> <span class="x">  listen 80;</span>
<span class="lineno"> 3</span> <span class="x">  server_name </span><span class="cp">&lt;%=</span> <span class="n">domain</span> <span class="cp">%&gt;</span><span class="x">;</span>
<span class="lineno"> 4</span>
<span class="lineno"> 5</span> <span class="x">  access_log  /var/log/nginx/</span><span class="cp">&lt;%=</span> <span class="nb">name</span> <span class="cp">%&gt;</span><span class="x">.access.log;</span>
<span class="lineno"> 6</span>
<span class="lineno"> 7</span> <span class="x">  location / {</span>
<span class="lineno"> 8</span> <span class="x">    root </span><span class="cp">&lt;%=</span> <span class="n">root</span> <span class="cp">%&gt;</span><span class="x">;</span>
<span class="lineno"> 9</span> <span class="x">    index  index.html;</span>
<span class="lineno">10</span> <span class="x">  }</span>
<span class="lineno">11</span> <span class="x">}</span>
</pre></div>
</section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              18/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">

            <header><h1>Nodes</h1></header>


            <section><p>Uses classes and invokes definitions from modules.</p>
<div class="highlight"><pre><span class="lineno"> 1</span> <span class="k">node</span> <span class="k">default</span> <span class="p">{</span>
<span class="lineno"> 2</span>   <span class="kn">include</span> <span class="n">ssh</span>
<span class="lineno"> 3</span>   <span class="kn">include</span> <span class="n">git</span>
<span class="lineno"> 4</span>   <span class="kn">include</span> <span class="n">timezone</span>
<span class="lineno"> 5</span>   <span class="kn">include</span> <span class="n">java</span><span class="p">::</span><span class="n">oracle</span>
<span class="lineno"> 6</span> <span class="p">}</span>
<span class="lineno"> 7</span>
<span class="lineno"> 8</span> <span class="k">node</span> <span class="s2">&quot;mgmt.muda.no&quot;</span> <span class="k">inherits</span> <span class="k">default</span><span class="n">s</span> <span class="p">{</span>
<span class="lineno"> 9</span>   <span class="kn">include</span> <span class="n">puppet</span><span class="p">::</span><span class="n">master</span>
<span class="lineno">10</span>   <span class="kn">include</span> <span class="n">sonatype</span><span class="p">::</span><span class="n">nexus</span>
<span class="lineno">11</span> <span class="p">}</span>
</pre></div>
</section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              19/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">

            <header><h1>Typical setup (client-server)</h1></header>


            <section><ul>
<li>One Puppet master</li>
<li>Many Puppet agents which pulls the Puppet master for changes over a REST API</li>
<li>SSL certificate based authentication &mdash; agents needs to get signed
  on the master</li>
</ul>
<p>The agents does not have access to the source configuration:</p>
<ol>
<li>The agent gathers local facts about its system</li>
<li>The agent requests a configuration catalog from the master</li>
<li>The master compiles the source configuration to a catalog and returns it to the agent</li>
<li>The agent applies the catalog which results in configuration changes</li>
</ol></section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              20/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">

            <header><h1>More</h1></header>


            <section><ul>
<li>Control structures (if, case)</li>
<li>Ruby plugins for creating new functions or resource types</li>
<li>Facter &mdash; gathers information from the host system &mdash;
  can be extended</li>
<li>Virtual resources.</li>
<li>Exported resources.</li>
<li>Separate environments (development, staging, production)</li>
</ul></section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              21/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">

            <header><h1>Alternatives</h1></header>


            <section><ul>
<li>Cfengine</li>
<li>Chef</li>
</ul>
<p>Reasons to use Puppet in stead of Chef:</p>
<ul>
<li>Bootstrap is easy: <code>yum install puppet</code></li>
<li>Restricted language makes you think through what you need to do
  and makes it hard to create quick hacks.</li>
<li>A client&mdash;server installation is more lightweight (Chef needs
  RabbitMQ, CouchDB, Solr)</li>
</ul>
<p>Cfengine</p>
<ul>
<li>If you're into compile issues.</li>
</ul></section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              22/23
            </aside>
          </footer>
        </div>
      </div>

      <!-- slide source: slides.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">

            <header><h1>Examples from the configuration</h1></header>


            <section><p>4 Linode VPS instances (mgmt, node1, node2, db1)</p>
<h2>Basic</h2>
<p>yum, puppet agent, puppet-master, Users, SSH, Network, NTP, timezone, UFW, git</p>
<h2>Servers</h2>
<p>apache, mysql, java, nexus</p></section>

          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>

            </section>
          </div>
          <footer>

            <aside class="source">
              Source: <a href="slides.md">slides.md</a>
            </aside>

            <aside class="page_number">
              23/23
            </aside>
          </footer>
        </div>
      </div>

    </div>
  </div>

  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>

      <tr id="toc-row-1">
        <th><a href="#slide1">Declarative Configuration Management with&nbsp;Puppet</a></th>
        <td><a href="#slide1">1</a></td>
      </tr>


      <tr id="toc-row-3">
        <th><a href="#slide3">Users</a></th>
        <td><a href="#slide3">3</a></td>
      </tr>


      <tr id="toc-row-4">
        <th><a href="#slide4">Preparation</a></th>
        <td><a href="#slide4">4</a></td>
      </tr>


      <tr id="toc-row-5">
        <th><a href="#slide5">Resources</a></th>
        <td><a href="#slide5">5</a></td>
      </tr>


      <tr id="toc-row-6">
        <th><a href="#slide6">Running puppet code</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>


      <tr id="toc-row-7">
        <th><a href="#slide7">Debugging puppet code</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>


      <tr id="toc-row-8">
        <th><a href="#slide8">Different resource types</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>


      <tr id="toc-row-9">
        <th><a href="#slide9">Generic resource types</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>


      <tr id="toc-row-10">
        <th><a href="#slide10">Dependencies between resources</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>


      <tr id="toc-row-11">
        <th><a href="#slide11">Templates and variables</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>


      <tr id="toc-row-13">
        <th><a href="#slide13">Running puppet code with templates</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>


      <tr id="toc-row-14">
        <th><a href="#slide14">Modules</a></th>
        <td><a href="#slide14">14</a></td>
      </tr>


      <tr id="toc-row-15">
        <th><a href="#slide15">Classes</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>


      <tr id="toc-row-16">
        <th><a href="#slide16">Applying modules</a></th>
        <td><a href="#slide16">16</a></td>
      </tr>


      <tr id="toc-row-17">
        <th><a href="#slide17">Definitions</a></th>
        <td><a href="#slide17">17</a></td>
      </tr>


      <tr id="toc-row-19">
        <th><a href="#slide19">Nodes</a></th>
        <td><a href="#slide19">19</a></td>
      </tr>


      <tr id="toc-row-20">
        <th><a href="#slide20">Typical setup (client-server)</a></th>
        <td><a href="#slide20">20</a></td>
      </tr>


      <tr id="toc-row-21">
        <th><a href="#slide21">More</a></th>
        <td><a href="#slide21">21</a></td>
      </tr>


      <tr id="toc-row-22">
        <th><a href="#slide22">Alternatives</a></th>
        <td><a href="#slide22">22</a></td>
      </tr>


      <tr id="toc-row-23">
        <th><a href="#slide23">Examples from the configuration</a></th>
        <td><a href="#slide23">23</a></td>
      </tr>


    </table>
  </div>

  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Expos</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>main()</script>
</body>
</html>